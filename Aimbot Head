-- Aimbot Script for Roblox
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local gui = Instance.new("ScreenGui")
local frame = Instance.new("Frame")
local textLabel = Instance.new("TextLabel")
local aimbotEnabled = false

-- GUI Setup
gui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
frame.Size = UDim2.new(0.2, 0, 0.2, 0)
frame.Position = UDim2.new(0.4, 0, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
frame.Parent = gui

textLabel.Size = UDim2.new(1, 0, 1, 0)
textLabel.Text = "Modded By Taidz"
textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
textLabel.Parent = frame

-- Function to toggle aimbot
local function toggleAimbot()
    aimbotEnabled = not aimbotEnabled
    if aimbotEnabled then
        textLabel.Text = "Aimbot Enabled"
    else
        textLabel.Text = "Aimbot Disabled"
    end
end

-- Aimbot Logic
local function aimAtTarget()
    while aimbotEnabled do
        local target = nil
        local closestDistance = math.huge
        
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= Players.LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                local distance = (player.Character.Head.Position - Players.LocalPlayer.Character.Head.Position).magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    target = player.Character.Head
                end
            end
        end
        
        if target then
            local aimPosition = target.Position
            -- Aim at the target (this is a placeholder for actual aiming logic)
            -- Example: Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(aimPosition)
        end
        
        RunService.RenderStepped:Wait()
    end
end

-- Input Handling
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == Enum.KeyCode.E then
            toggleAimbot()
            if aimbotEnabled then
                aimAtTarget()
            end
        elseif input.KeyCode == Enum.KeyCode.C then
            aimbotEnabled = false
            textLabel.Text = "Aimbot Disabled"
        end
    end
end)

-- Error Handling
local function safeExecute(func)
    local success, err = pcall(func)
    if not success then
        warn("Error occurred: " .. tostring(err))
    end
end

-- Main Execution
safeExecute(function()
    while true do
        wait(1) -- Keep the script running
    end
end)
