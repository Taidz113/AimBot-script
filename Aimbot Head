-- Aimbot Script for Roblox
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local gui = Instance.new("ScreenGui")
local frame = Instance.new("Frame")
local textLabel = Instance.new("TextLabel")
local aimbotEnabled = false

-- GUI Setup
gui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
frame.Size = UDim2.new(0, 200, 0, 100)
frame.Position = UDim2.new(0.5, -100, 0.5, -50)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
frame.Draggable = true -- Cho phép Frame được kéo
frame.Parent = gui

textLabel.Size = UDim2.new(1, 0, 1, 0)
textLabel.Text = "Modded By Taidz"
textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
textLabel.BackgroundTransparency = 1
textLabel.Parent = frame

-- Function to toggle aimbot
local function toggleAimbot()
    aimbotEnabled = not aimbotEnabled
    if aimbotEnabled then
        textLabel.Text = "Aimbot Enabled"
    else
        textLabel.Text = "Aimbot Disabled"
    end
end

-- Aimbot Logic
RunService.RenderStepped:Connect(function()
    if aimbotEnabled then
        local player = Players.LocalPlayer
        local character = player.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            local closestTarget = nil
            local closestDistance = math.huge

            for _, v in pairs(Players:GetPlayers()) do
                if v ~= player and v.Character and v.Character:FindFirstChild("Head") then
                    local distance = (character.HumanoidRootPart.Position - v.Character.Head.Position).magnitude
                    if distance < closestDistance then
                        closestTarget = v.Character.Head
                        closestDistance = distance
                    end
                end
            end
            
            if closestTarget then
                -- Đặt góc nhìn của camera hướng về mục tiêu
                local camera = workspace.CurrentCamera
                camera.CFrame = CFrame.new(camera.CFrame.Position, closestTarget.Position)
            end
        end
    end
end)

-- Input Handling
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == Enum.KeyCode.E then
            toggleAimbot()
        elseif input.KeyCode == Enum.KeyCode.C then
            aimbotEnabled = false
            textLabel.Text = "Aimbot Disabled"
        end
    end
end)

-- Error Handling
local function safeExecute(func)
    local success, err = pcall(func)
    if not success then
        warn("Error occurred: " .. err)
    end
end

-- Main Execution
safeExecute(function()
    while true do
        wait(1) -- Loop to keep the text visible
        if not aimbotEnabled then
            textLabel.Text = "Modded By Taidz"
        end
    end
end)
