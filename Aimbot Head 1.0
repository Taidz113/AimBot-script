-- Magic Bullet 1.0 Script
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local ShootButton = Instance.new("TextButton")
local SuperFixLagButton = Instance.new("TextButton")

-- Function to create GUI
local function createGUI()
    ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
    MainFrame.Size = UDim2.new(0.2, 0, 0.3, 0)
    MainFrame.Position = UDim2.new(0.4, 0, 0.35, 0)
    MainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
    MainFrame.Parent = ScreenGui

    ShootButton.Size = UDim2.new(1, 0, 0.5, 0)
    ShootButton.Text = "Magic Bullet"
    ShootButton.Parent = MainFrame

    SuperFixLagButton.Size = UDim2.new(1, 0, 0.5, 0)
    SuperFixLagButton.Position = UDim2.new(0, 0, 0.5, 0)
    SuperFixLagButton.Text = "Super Fix Lag"
    SuperFixLagButton.Parent = MainFrame

    -- Make GUI draggable
    local dragging
    local dragInput
    local startPos

    MainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            startPos = input.Position - MainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    MainFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    RunService.RenderStepped:Connect(function()
        if dragging then
            MainFrame.Position = UDim2.new(0, dragInput.Position.X - startPos.X, 0, dragInput.Position.Y - startPos.Y)
        end
    end)
end

-- Aimbot Functionality
local function aimbot()
    while true do
        wait(0.1)
        local target = nil
        local closestDistance = math.huge

        for _, player in pairs(Players:GetPlayers()) do
            if player ~= Players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local distance = (player.Character.HumanoidRootPart.Position - Players.LocalPlayer.Character.HumanoidRootPart.Position).magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    target = player
                end
            end
        end

        if target then
            -- Aim at the target's head
            local head = target.Character:FindFirstChild("Head")
            if head then
                -- Simulate shooting at the target's head
                print("Aiming at: " .. target.Name)
                -- Add shooting logic here
            end
        end
    end
end

-- Function to fix lag
local function fixLag()
    -- Adjust graphics settings
    print("Adjusting graphics settings for optimal performance.")
    -- Add logic to reduce graphics and FPS here
end

-- Button Event Handlers
ShootButton.MouseButton1Click:Connect(function()
    print("Magic Bullet activated.")
    -- Add shooting logic here
end)

SuperFixLagButton.MouseButton1Click:Connect(function()
    fixLag()
end)

-- Error Handling
local function safeExecute(func)
    local success, err = pcall(func)
    if not success then
        warn("Error occurred: " .. err)
    end
end

-- Main Execution
safeExecute(function()
    createGUI()
    aimbot()
end)
